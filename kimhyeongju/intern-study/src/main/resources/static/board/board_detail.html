<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>게시글 상세</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <link href="/css/board_detail.css" rel="stylesheet" />
</head>
<body>
<div class="page-wrapper">
    <div class="post-card shadow">
        <h2 class="post-title" id="boardTitle">제목 로딩 중...</h2>
        <div class="post-meta">
            <span id="writer">작성자: ...</span>
            <span id="createDate">작성일: ...</span>
        </div>
        <div class="post-content content-box" id="boardContent">내용 로딩 중...</div>
        <div class="d-flex justify-content-end mt-4">
            <button onclick="location.href='/board/board_list.html'" class="btn btn-purple">
                <i class="fas fa-list-ul"></i> 목록으로
            </button>
        </div>
    </div>
</div>
</body>
<script src="/js/common.js"></script>
<script>
    async function loadBoardDetail() {
        const urlParams = new URLSearchParams(window.location.search);
        const boardId = urlParams.get('id');
        if (!boardId) {
            await AlertUtil.showError("유효하지 않은 게시글 ID입니다.");
            window.location.href = "/board/board_list.html";
            return;
        }

        try {
            const board = await ApiUtil.get(`/v1/board/${boardId}`);
            if (!board) {
                window.location.href = "/board/board_list.html";
                return;
            }

            document.getElementById("boardTitle").textContent = board.title;
            const createDate = new Date(board.createAt).toLocaleDateString('ko-KR', {
                year: 'numeric', month: 'long', day: 'numeric'
            });
            document.getElementById("writer").textContent = `작성자: ${board.username}`;
            document.getElementById("createDate").textContent = `작성일: ${createDate}`;
            document.getElementById("boardContent").textContent = board.content;
        } catch (e) {
            console.error("API 호출 중 예외 발생:", e);
            await AlertUtil.showError("게시글을 불러오는 중 오류가 발생했습니다.");
            window.location.href = "/board/board_list.html";
        }
    }

    document.addEventListener("DOMContentLoaded", () => setTimeout(loadBoardDetail, 100));
</script>
</html>
